"use strict";(self["webpackChunkvue3_nb0"]=self["webpackChunkvue3_nb0"]||[]).push([[835],{18835:(e,l,a)=>{a.r(l),a.d(l,{default:()=>k});a(61781),a(99939),a(96330),a(14580),a(54371),a(802),a(45440),a(92207),a(4962),a(79029),a(17425),a(38704),a(78623),a(13499),a(8461),a(63068),a(19937),a(63362);var n=a(44401),t=a(28849),u=(a(65934),a(71066)),i=a(16141),o=a(77549),r=(a(80422),a(22097),a(38865),a(59961),{class:"formModel_btn_box"});const d={__name:"formModel",emits:["formModelChange"],setup:function(e,l){var a,t=l.expose,i=l.emit,o=null===(a=(0,n.FN)())||void 0===a?void 0:a.appContext.config.globalProperties,d="cart",c="购物车",s=(0,u.iH)({}),p=(0,u.iH)({tablename:!1,goodid:!1,goodname:!1,picture:!1,buynumber:!1,price:!1,discountprice:!1,userid:!1,qiyezhanghao:!1}),v=(0,u.iH)(!1),f=(0,u.iH)(!1),m=(0,u.iH)(""),g=function(e,l,a){l?null!==o&&void 0!==o&&o.$toolUtil.isIntNumer(l)?a():a(new Error("请输入整数")):a()},b=function(e,l,a){l?null!==o&&void 0!==o&&o.$toolUtil.isNumber(l)?a():a(new Error("请输入数字")):a()},h=(0,u.iH)({tablename:[],goodid:[{required:!0,message:"请输入",trigger:"blur"}],goodname:[],picture:[{required:!0,message:"请输入",trigger:"blur"}],buynumber:[{validator:g,trigger:"blur"}],price:[{validator:b,trigger:"blur"}],discountprice:[{validator:b,trigger:"blur"}],userid:[{required:!0,message:"请输入",trigger:"blur"}],qiyezhanghao:[]}),w=(0,u.iH)(null),y=(0,u.iH)(0),_=(0,u.iH)(""),W=function(e){s.value.picture=e},k=function(){s.value={tablename:"shengzishangpin",goodid:"",goodname:"",picture:"",buynumber:"",price:"",discountprice:"",userid:"",qiyezhanghao:""}},z=function(){null===o||void 0===o||o.$http({url:"".concat(d,"/info/").concat(y.value),method:"get"}).then((function(e){new RegExp("../../../file","g");s.value=e.data.data,v.value=!0}))},U=(0,u.iH)(""),x=(0,u.iH)(""),H=(0,u.iH)(""),V=(0,u.iH)(""),C=(0,u.iH)(""),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(k(),e&&(y.value=e,_.value=l),"add"==l)f.value=!0,m.value="新增"+c,v.value=!0;else if("info"==l)f.value=!1,m.value="查看"+c,z();else if("edit"==l)f.value=!0,m.value="修改"+c,z();else if("cross"==l){for(var r in f.value=!0,m.value=a,n)"tablename"!=r?"goodid"!=r?"goodname"!=r?"picture"!=r?"buynumber"!=r?"price"!=r?"discountprice"!=r?"userid"!=r?"qiyezhanghao"!=r||(s.value.qiyezhanghao=n[r],p.value.qiyezhanghao=!0):(s.value.userid=n[r],p.value.userid=!0):(s.value.discountprice=n[r],p.value.discountprice=!0):(s.value.price=n[r],p.value.price=!0):(s.value.buynumber=n[r],p.value.buynumber=!0):(s.value.picture=n[r],p.value.picture=!0):(s.value.goodname=n[r],p.value.goodname=!0):(s.value.goodid=n[r],p.value.goodid=!0):(s.value.tablename=n[r],p.value.tablename=!0);n&&(U.value=n),t&&(x.value=t),i&&(H.value=i),u&&(V.value=u),o&&(C.value=o),s.value.tablename="shengzishangpin",v.value=!0}};t({init:$});var q=function(){v.value=!1},M=function(){null!=s.value.picture&&(s.value.picture=s.value.picture.replace(new RegExp(null===o||void 0===o?void 0:o.$config.url,"g"),""));x.value;var e=JSON.parse(JSON.stringify(U.value)),l="",a="",n="";if("cross"==_.value&&""!=V.value)if(V.value.startsWith("["))l=null===o||void 0===o?void 0:o.$toolUtil.storageGet("userid"),a=e["id"],n=V.value.replace(/\[/,"").replace(/\]/,"");else{for(var t in e)t==V.value&&(e[t]=C.value);N(e)}w.value.validate((function(e){if(e)if(l&&a){s.value.crossuserid=l,s.value.crossrefid=a;var t={page:1,limit:1e3,crossuserid:s.value.crossuserid,crossrefid:s.value.crossrefid};null===o||void 0===o||o.$http({url:"".concat(d,"/page"),method:"get",params:t}).then((function(e){if(e.data.data.total>=n)return null===o||void 0===o||o.$toolUtil.message("".concat(H.value),"error"),!1;null===o||void 0===o||o.$http({url:"".concat(d,"/").concat(s.value.id?"update":"save"),method:"post",data:s.value}).then((function(e){i("formModelChange"),null===o||void 0===o||o.$toolUtil.message("操作成功","success",(function(){v.value=!1}))}))}))}else null===o||void 0===o||o.$http({url:"".concat(d,"/").concat(s.value.id?"update":"save"),method:"post",data:s.value}).then((function(e){i("formModelChange"),null===o||void 0===o||o.$toolUtil.message("操作成功","success",(function(){v.value=!1}))}))}))},N=function(e){null===o||void 0===o||o.$http({url:"".concat(x.value,"/update"),method:"post",data:e}).then((function(e){}))};return function(e,l){var a=(0,n.up)("el-input"),t=(0,n.up)("el-form-item"),u=(0,n.up)("el-col"),i=(0,n.up)("uploads"),o=(0,n.up)("el-row"),d=(0,n.up)("el-form"),c=(0,n.up)("el-button"),g=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(g,{modelValue:v.value,"onUpdate:modelValue":l[7]||(l[7]=function(e){return v.value=e}),title:m.value,width:"50%","destroy-on-close":"",fullscreen:!1},(0,n.Nv)({default:(0,n.w5)((function(){return[(0,n.Wm)(d,{class:"formModel_form",ref_key:"formRef",ref:w,model:s.value,"label-width":"$template2.back.add.form.base.labelWidth",rules:h.value},{default:(0,n.w5)((function(){return[(0,n.Wm)(o,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(u,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"商品表名",prop:"tablename"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:s.value.tablename,"onUpdate:modelValue":l[0]||(l[0]=function(e){return s.value.tablename=e}),placeholder:"商品表名",type:"text",readonly:!(f.value&&!p.value.tablename)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"商品id",prop:"goodid"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:s.value.goodid,"onUpdate:modelValue":l[1]||(l[1]=function(e){return s.value.goodid=e}),placeholder:"商品id",type:"text",readonly:!(f.value&&!p.value.goodid)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"商品名称",prop:"goodname"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:s.value.goodname,"onUpdate:modelValue":l[2]||(l[2]=function(e){return s.value.goodname=e}),placeholder:"商品名称",type:"text",readonly:!(f.value&&!p.value.goodname)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{prop:"picture",label:"图片"},{default:(0,n.w5)((function(){return[(0,n.Wm)(i,{disabled:!(f.value&&!p.value.picture),action:"file/upload",tip:"请上传图片",limit:3,style:{width:"100%","text-align":"left"},fileUrls:s.value.picture?s.value.picture:"",onChange:W},null,8,["disabled","fileUrls"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"购买数量",prop:"buynumber"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:s.value.buynumber,"onUpdate:modelValue":l[3]||(l[3]=function(e){return s.value.buynumber=e}),modelModifiers:{number:!0},placeholder:"购买数量",type:"text",readonly:!(f.value&&!p.value.buynumber)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"单价",prop:"price"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:s.value.price,"onUpdate:modelValue":l[4]||(l[4]=function(e){return s.value.price=e}),modelModifiers:{number:!0},placeholder:"单价",type:"number",readonly:!(f.value&&!p.value.price)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"折扣价",prop:"discountprice"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:s.value.discountprice,"onUpdate:modelValue":l[5]||(l[5]=function(e){return s.value.discountprice=e}),modelModifiers:{number:!0},placeholder:"折扣价",type:"number",readonly:!(f.value&&!p.value.discountprice)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:12},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"商户名称",prop:"qiyezhanghao"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:s.value.qiyezhanghao,"onUpdate:modelValue":l[6]||(l[6]=function(e){return s.value.qiyezhanghao=e}),placeholder:"商户名称",type:"text",readonly:!(f.value&&!p.value.qiyezhanghao)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])]})),_:2},[f.value||"logistics"==_.value||"reply"==_.value?{name:"footer",fn:(0,n.w5)((function(){return[(0,n._)("span",r,[(0,n.Wm)(c,{class:"formModel_cancel",onClick:q},{default:(0,n.w5)((function(){return[(0,n.Uk)("取消")]})),_:1}),(0,n.Wm)(c,{class:"formModel_confirm",type:"primary",onClick:M},{default:(0,n.w5)((function(){return[(0,n.Uk)(" 提交 ")]})),_:1})])]})),key:"0"}:void 0]),1032,["modelValue","title"])])}}};var c=a(51059);const s=(0,c.Z)(d,[["__scopeId","data-v-7bb5cd70"]]),p=s;var v=function(e){return(0,n.dD)("data-v-482b7a5e"),e=e(),(0,n.Cn)(),e},f={class:"app-contain"},m={class:"list_search_view"},g=v((function(){return(0,n._)("br",null,null,-1)})),b={class:"btn_view"},h=v((function(){return(0,n._)("br",null,null,-1)})),w={key:0},y={key:1};const _={__name:"list",setup:function(e){var l,a=null===(l=(0,n.FN)())||void 0===l?void 0:l.appContext.config.globalProperties,r="cart",d="购物车";(0,i.yj)();(0,n.bv)((function(){}));var c=(0,u.iH)(null),s=(0,u.iH)(null),v=(0,u.iH)({page:1,limit:20,sort:"id",order:"desc"}),_=(0,u.iH)({}),W=(0,u.iH)([]),k=(0,u.iH)(!1),z=function(e){(0,n.Y3)((function(){s.value.clearSelection(),s.value.toggleRowSelection(e)}))},U=function(){k.value=!0;var e=JSON.parse(JSON.stringify(v.value));e["sort"]="id",e["order"]="desc",null===a||void 0===a||a.$http({url:"".concat(r,"/page"),method:"get",params:e}).then((function(e){k.value=!1,c.value=e.data.data.list,V.value=Number(e.data.data.total)}))},x=function(e){var l=(0,u.iH)([]);if(e)l.value=[e];else{if(!W.value.length)return!1;for(var n in W.value)l.value.push(W.value[n].id)}o.T.confirm("是否删除选中".concat(d),"提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){null===a||void 0===a||a.$http({url:"".concat(r,"/delete"),method:"post",data:l.value}).then((function(e){null===a||void 0===a||a.$toolUtil.message("删除成功","success",(function(){U()}))}))}))},H=function(e){W.value=e},V=(0,u.iH)(0),C=(0,u.iH)(["total","prev","pager","next","sizes","jumper"]),$=function(e){v.value.limit=e,U()},q=function(e){v.value.page=e,U()},M=function(){v.value.page=v.value.page-1,U()},N=function(){v.value.page=v.value.page+1,U()},j=function(e,l){return null===a||void 0===a?void 0:a.$toolUtil.isAuth(e,l)},S=function(){v.value.page=1,U()},R=(0,u.iH)(null),D=function(){S()},E=function(){R.value.init()},J=function(){W.value.length&&R.value.init(W.value[0].id,"edit")},O=function(){U()};return O(),function(e,l){var a=(0,n.up)("el-form"),u=(0,n.up)("el-button"),i=(0,n.up)("el-table-column"),o=(0,n.up)("el-image"),r=(0,n.up)("el-table"),d=(0,n.up)("el-pagination"),U=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",f,[(0,n._)("div",m,[(0,n.Wm)(a,{model:_.value,class:"search_form"},null,8,["model"]),g,(0,n._)("div",b,[j("cart","新增")?((0,n.wg)(),(0,n.j4)(u,{key:0,type:"success",onClick:E},{default:(0,n.w5)((function(){return[(0,n.Uk)("新增")]})),_:1})):(0,n.kq)("",!0),j("cart","修改")?((0,n.wg)(),(0,n.j4)(u,{key:1,type:"primary",disabled:1!=W.value.length,onClick:J},{default:(0,n.w5)((function(){return[(0,n.Uk)("修改")]})),_:1},8,["disabled"])):(0,n.kq)("",!0),j("cart","删除")?((0,n.wg)(),(0,n.j4)(u,{key:2,type:"danger",disabled:!W.value.length,onClick:l[0]||(l[0]=function(e){return x(null)})},{default:(0,n.w5)((function(){return[(0,n.Uk)("删除")]})),_:1},8,["disabled"])):(0,n.kq)("",!0)])]),h,j("cart","查看")?(0,n.wy)(((0,n.wg)(),(0,n.j4)(r,{key:0,border:"",stripe:!0,onSelectionChange:H,ref_key:"table",ref:s,data:c.value,onRowClick:z},{default:(0,n.w5)((function(){return[(0,n.Wm)(i,{resizable:!0,align:"left","header-align":"left",type:"selection",width:"55"}),(0,n.Wm)(i,{label:"序号",width:"70",resizable:!0,sortable:!0,align:"left","header-align":"left"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.$index+1),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",prop:"tablename",label:"商品表名"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.tablename),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",prop:"goodid",label:"商品id"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.goodid),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",prop:"goodname",label:"商品名称"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.goodname),1)]})),_:1}),(0,n.Wm)(i,{label:"图片",width:"120",resizable:!0,sortable:!0,align:"left","header-align":"left"},{default:(0,n.w5)((function(l){return[l.row.picture?((0,n.wg)(),(0,n.iD)("div",w,["http"==l.row.picture.substring(0,4)?((0,n.wg)(),(0,n.j4)(o,{key:0,"preview-teleported":"","preview-src-list":[l.row.picture.split(",")[0]],src:l.row.picture.split(",")[0],style:{width:"100px",height:"100px"}},null,8,["preview-src-list","src"])):((0,n.wg)(),(0,n.j4)(o,{key:1,"preview-teleported":"","preview-src-list":[e.$config.url+l.row.picture.split(",")[0]],src:e.$config.url+l.row.picture.split(",")[0],style:{width:"100px",height:"100px"}},null,8,["preview-src-list","src"]))])):((0,n.wg)(),(0,n.iD)("div",y,"无图片"))]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",prop:"buynumber",label:"购买数量"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.buynumber),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",prop:"price",label:"单价"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.price),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",prop:"discountprice",label:"折扣价"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.discountprice),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",prop:"qiyezhanghao",label:"商户名称"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.qiyezhanghao),1)]})),_:1}),(0,n.Wm)(i,{label:"操作",width:"300",resizable:!0,sortable:!0,align:"left","header-align":"left"},{default:(0,n.w5)((function(e){return[]})),_:1})]})),_:1},8,["data"])),[[U,k.value]]):(0,n.kq)("",!0),(0,n.Wm)(d,{background:"",layout:C.value.join(","),total:V.value,"page-size":v.value.limit,"prev-text":"上一页","next-text":"下一页","hide-on-single-page":!1,style:{border:"0px solid #e1e1e1",padding:"10px 0",margin:"20px 0 0",whiteSpace:"nowrap",color:"#333",textAlign:"left",background:"none",width:"100%",fontWeight:"500"},onSizeChange:$,onCurrentChange:q,onPrevClick:M,onNextClick:N},null,8,["layout","total","page-size"])]),(0,n.Wm)(p,{ref_key:"formRef",ref:R,onFormModelChange:D},null,512)])}}},W=(0,c.Z)(_,[["__scopeId","data-v-482b7a5e"]]),k=W}}]);
//# sourceMappingURL=835.1fc8aaa8.js.map